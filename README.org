#+BEGIN_HTML
<a href="https://ci.appveyor.com/project/bozenne/lmbreak"><img src="https://ci.appveyor.com/api/projects/status/github/bozenne/lmbreak?svg=true" alt="Build status"></a>
<a href="https://github.com/bozenne/lmbreak/actions"><img src="https://github.com/bozenne/lmbreak/workflows/r/badge.svg" alt="Build status"></a>
<a href="http://www.gnu.org/licenses/gpl-3.0.html"><img src="https://img.shields.io/badge/License-GPLv3-blue.svg" alt="License"></a>
#+END_HTML

#+BEGIN_SRC R :exports none :results output :session *R* :cache no
options(width = 100)
#+END_SRC

#+RESULTS:

* lmbreak: Linear Regression with Unknown Breakpoints

*lmbreak*: Fit linear regression with unknown breakpoints

** Installation

You can download the latest stable =GitHub= version using:
#+BEGIN_SRC R :exports both :eval never
library(remotes)
install_github("bozenne/lmbreak")
#+END_SRC

** Functionalities

To illustrate the functionnalities of the package we will consider the following dataset:
#+BEGIN_SRC R :exports both :results output :session *R* :cache no
data(SDIpsilo, package = "lmbreak")
str(SDIpsilo)
#+END_SRC

#+RESULTS:
: 'data.frame':	346 obs. of  4 variables:
:  $ id   : Factor w/ 15 levels "1","2","3","4",..: 1 1 1 1 1 1 1 1 1 1 ...
:  $ time : num  0 20 40 60 80 100 120 140 160 180 ...
:  $ type : chr  "signal" "signal" "signal" "signal" ...
:  $ score: num  0 1 3 8 10 10 10 9 10 10 ...

where the experience of 15 individuals is monitored over time. To
start with consider the data of a single individual:
#+BEGIN_SRC R :exports both :results output :session *R* :cache no
SDIpsilo1 <- SDIpsilo[SDIpsilo$id==1,]
#+END_SRC

We can model his experience using a breakpoint model with 2
breakpoints, with an initial increase followed by a plateau followed
by a normalization ("101"):
#+BEGIN_SRC R :exports code :results silent :session *R* :cache no
e.XP1 <- lmbreak(score ~ 0 + bp(time, "101"), data = SDIpsilo1)
plot(e.XP1, ylim = c(0,10))
#+END_SRC

# # ggplot2::ggsave(ggplot2::autoplot(e.XP1, ylim = c(0,10))$plot, file = "inst/figures/gg-101-patient1.png")

#+BEGIN_HTML
<img src="[[./inst/figures/gg-101-patient1.png]]" title="101 pattern - patient 1" alt="101 pattern - patient 1" width="50%" style="display: block; margin: auto;" />
#+END_HTML



